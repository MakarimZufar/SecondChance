{% extends "base.html" %}
{% load static %}
{% block title %}main{% endblock %}
{% block content %}
<div class="grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 gap-4 p-4">
    {% for product in products %}
    <div class="bg-white shadow-lg rounded-lg overflow-hidden transition-transform duration-300 hover:scale-105 cursor-pointer" onclick="openModal('{{ product.name }}', '{% if product.image %}{{ product.image.url }}{% else %}{% static 'image/default_product_image.png' %}{% endif %}', '{{ product.price }}', '{{ product.description }}')">
        
        <!-- Menampilkan Gambar Produk jika tersedia atau Gambar Default jika tidak ada -->
        {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-36 object-cover">
        {% else %}
        <img src="{% static 'image/default_product_image.jpg' %}" alt="Default Image" class="w-full h-36 object-cover">
        {% endif %}
        
        <div class="p-4">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">{{ product.name }}</h3>

            <!-- Menampilkan siapa yang membuat produk -->
            <p class="text-sm text-gray-600 mb-2">Created by: {{ product.user.username }}</p>
            
            <!-- Kategori Produk dengan Desain Menonjol -->
            <div class="flex items-center mb-2">
                <span class="inline-block px-2 py-1 bg-gradient-to-r from-purple-500 to-indigo-500 text-white text-xs font-semibold rounded-full uppercase tracking-wide">
                    {{ product.category }}
                </span>
            </div>
            
            <!-- Stock Badge -->
            {% if product.is_in_stock %}
            <span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full uppercase font-semibold tracking-wide">
                In Stock
            </span>
            {% else %}
            <span class="inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full uppercase font-semibold tracking-wide">
                Out of Stock
            </span>
            {% endif %}
            
            <p class="text-md font-bold text-indigo-600 mt-2">Rp {{ product.price }}</p>
            <p class="text-sm text-gray-600 mb-4">Description: {{ product.description }}</p>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Modal -->
<div id="productModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-md w-full relative">
        <button class="absolute top-2 right-2 text-gray-600 hover:text-gray-900" onclick="closeModal()">&times;</button>
        <img id="modalImage" class="w-full h-64 object-cover rounded-md mb-4" alt="Product Image">
        <h2 id="modalName" class="text-2xl font-bold mb-4"></h2>
        <p id="modalPrice" class="text-xl text-indigo-600 mb-4"></p>
        <p id="modalDescription" class="text-sm text-gray-600"></p>
    </div>
</div>

<script>
    function openModal(name, imageUrl, price, description) {
        document.getElementById('modalName').textContent = name;
        document.getElementById('modalImage').src = imageUrl;
        document.getElementById('modalPrice').textContent = 'Rp ' + price;
        document.getElementById('modalDescription').textContent = description;
        document.getElementById('productModal').classList.remove('hidden');
    }

    function closeModal() {
        document.getElementById('productModal').classList.add('hidden');
    }
</script>

{% endblock content %}
